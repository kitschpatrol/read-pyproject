[build-system]
requires = ["poetry-core>=1.0.0"]
build-backend = "poetry.core.masonry.api"

[tool.poetry]
name = "fppdf"
version = "0.0.0"
description = "A framework for the extraction of Parton Distribution Functions using abitrary parametrizations"
readme = "README"
authors = [
    "Juan M. Cruz-Martinez <juacrumar@lairen.eu>",
    "Lucian Harland-Lang <l.harland-lang@ucl.ac.uk>",
    "Tommaso Giani <tgiani@nikhef.nl>"
]
classifiers = [
    "Programming Language :: Python",
    "Programming Language :: Python :: 3",
    "Topic :: Scientific/Engineering",
    "Topic :: Scientific/Engineering :: Physics",
    "License :: OSI Approved :: GNU General Public License v3 (GPLv3)",
]
license = "GPL-3.0-or-later"
repository = "https://github.com/LucianHL/fppdf"
packages = [ 
    { include = "fppdf", from = "src" },
]

[tool.poetry.scripts]
# The fppdf script does the central PDF determination at the initial scale
fppdf_fitpdf = "fppdf.scripts.fixparpdf_exec:main"
# Hesianerr produces the hessian errors
fppdf_hessianerr = "fppdf.scripts.hessianerr_exec:main"
# fppdf_evolve takes a folder of .exportgrids and produces the corresponding LHAPDF grid 
fppdf_evolve = "fppdf.scripts.fixpar_evolve:main"
# fixpar script to pre-compute the theory covariance matrix
fppdf_setupfit = "fppdf.scripts.fixpar_setupfit:main"

[tool.poetry.dependencies]
python = ">=3.9"
nnpdf = ">=4.1.3"

[tool.black]
line-length = 100
skip-string-normalization = true
skip-magic-trailing-comma = true

[tool.isort]
atomic = true
line_length = 100
profile = "black" # https://black.readthedocs.io/en/stable/guides/using_black_with_other_tools.html#custom-configuration
skip_gitignore = true
known_first_party = ["fppdf"]
force_sort_within_sections = true

[tool.pixi.workspace]
channels = ["conda-forge"]
platforms = ["linux-64"]

[tool.pixi.pypi-dependencies]
fppdf = { path = ".", editable = true }

[tool.pixi.tasks]

[tool.pixi.dependencies]
nnpdf = ">=4.1.3"
python = ">=3.9"
pip = ">=26.0.1,<27"
reportengine = "*"
